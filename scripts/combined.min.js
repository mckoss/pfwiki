(function(g){g.fn.autoResize=function(k){var p=g.extend({onResize:function(){},animate:!0,animateDuration:150,animateCallback:function(){},extraSpace:20,limit:1E3},k);this.filter("textarea").each(function(){var m=g(this).css({resize:"none","overflow-y":"hidden"}),k=m.height(),r=function(){var b={};g.each(["height","width","lineHeight","textDecoration","letterSpacing"],function(f,h){b[h]=m.css(h)});return m.clone().removeAttr("id").removeAttr("name").css({position:"absolute",top:0,left:-9999}).css(b).attr("tabIndex",
"-1").insertBefore(m)}(),l=null,n=function(){r.height(0).val(g(this).val()).scrollTop(1E4);var b=Math.max(r.scrollTop(),k)+p.extraSpace,f=g(this).add(r);if(b>=p.limit)g(this).css("overflow-y",""),b=p.limit;l!==b&&(l=b,p.onResize.call(this),p.animate&&m.css("display")==="block"?f.stop().animate({height:b},p.animateDuration,p.animateCallback):f.height(b))};m.unbind(".dynSiz").bind("keyup.dynSiz",n).bind("keydown.dynSiz",n).bind("change.dynSiz",n).trigger("change.dynSiz")});return this}})(jQuery);var Showdown={};
Showdown.converter=function(){var g,k,p,m=0;this.makeHtml=function(a){g=[];k=[];p=[];a=a.replace(/~/g,"~T");a=a.replace(/\$/g,"~D");a=a.replace(/\r\n/g,"\n");a=a.replace(/\r/g,"\n");a=z("\n\n"+a+"\n\n");a=a.replace(/^[ \t]+$/mg,"");a=r(a);a=t(a);a=n(a);a=A(a);a=a.replace(/~D/g,"$$");return a=a.replace(/~T/g,"~")};var t=function(a){return a=a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|\Z)/gm,function(a,d,j,b,e){d=d.toLowerCase();g[d]=v(j);
if(b)return b+e;else e&&(k[d]=e.replace(/"/g,"&quot;"));return""})},r=function(a){a=a.replace(/\n/g,"\n\n");a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,l);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,l);a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,l);a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,
l);a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,l);return a=a.replace(/\n\n/g,"\n")},l=function(a,i){var d;d=i.replace(/\n\n/g,"\n");d=d.replace(/^\n/,"");d=d.replace(/\n+$/g,"");return d="\n\n~K"+(p.push(d)-1)+"K\n\n"},n=function(a){a=e(a);var i=c("<hr />");a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,i);a=a.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,i);a=a.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,i);a=B(a);a=E(a);a=C(a);a=r(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,
"");var d=a.split(/\n{2,}/g);a=[];i=d.length;for(var j=0;j<i;j++){var s=d[j];s.search(/~K(\d+)K/g)>=0?a.push(s):s.search(/\S/)>=0&&(s=b(s),s=s.replace(/^([ \t]*)/g,"<p>"),s+="</p>",a.push(s))}i=a.length;for(j=0;j<i;j++)for(;a[j].search(/~K(\d+)K/)>=0;)d=p[RegExp.$1],d=d.replace(/\$/g,"$$$$"),a[j]=a[j].replace(/~K\d+K/,d);return a=a.join("\n\n")},b=function(a){a=o(a);a=f(a);a=a.replace(/\\(\\)/g,w);a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,w);a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,
q);a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,q);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,h);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,h);a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,h);a=F(a);a=v(a);a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>");a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>");return a=a.replace(/  +\n/g," <br />\n")},f=function(a){return a=
a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(a){a=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return a=u(a,"\\`*_")})},h=function(a,i,d,j,b,e,h,c){c==void 0&&(c="");a=j.toLowerCase();if(b=="")if(a==""&&(a=d.toLowerCase().replace(/ ?\n/g," ")),g[a]!=void 0)b=g[a],k[a]!=void 0&&(c=k[a]);else if(i.search(/\(\s*\)$/m)>-1)b="";else return i;b=u(b,"*_");i='<a href="'+b+'"';c!=""&&(c=c.replace(/"/g,"&quot;"),c=u(c,"*_"),i+=' title="'+c+'"');i+=">"+d+"</a>";return i},q=function(a,
i,d,b,c,e,h,f){a=d;b=b.toLowerCase();f||(f="");if(c=="")if(b==""&&(b=a.toLowerCase().replace(/ ?\n/g," ")),g[b]!=void 0)c=g[b],k[b]!=void 0&&(f=k[b]);else return i;a=a.replace(/"/g,"&quot;");c=u(c,"*_");i='<img src="'+c+'" alt="'+a+'"';f=f.replace(/"/g,"&quot;");f=u(f,"*_");i+=' title="'+f+'"';i+=" />";return i},e=function(a){a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,d){return c("<h1>"+b(d)+"</h1>")});a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,d){return c("<h2>"+b(d)+"</h2>")});
return a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,d,j){a=d.length;return c("<h"+a+">"+b(j)+"</h"+a+">")})},x,B=function(a){a+="~0";var i=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;m?a=a.replace(i,function(a,i,b){a=i;b=b.search(/[*+-]/g)>-1?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=x(a);a=a.replace(/\s+$/,"");return"<"+b+">"+a+"</"+b+">\n"}):(i=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,
a=a.replace(i,function(a,b,i,c){a=i;c=c.search(/[*+-]/g)>-1?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=x(a);return b+"<"+c+">\n"+a+"</"+c+">\n"}));return a=a.replace(/~0/,"")};x=function(a){m++;a=a.replace(/\n{2,}$/,"\n");a+="~0";a=a.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(a,d,c,e,f){a=f;d||a.search(/\n{2,}/)>-1?a=n(y(a)):(a=B(y(a)),a=a.replace(/\n$/,""),a=b(a));return"<li>"+a+"</li>\n"});a=a.replace(/~0/g,"");m--;return a};var E=
function(a){a+="~0";a=a.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,j){a=D(y(b));a=z(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");return c("<pre><code>"+a+"\n</code></pre>")+j});return a=a.replace(/~0/,"")},c=function(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(p.push(a)-1)+"K\n\n"},o=function(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,e){a=e.replace(/^([ \t]*)/g,"");a=a.replace(/[ \t]*$/g,"");a=D(a);return b+
"<code>"+a+"</code>"})},D=function(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a=u(a,"*_{}[]\\",!1)},C=function(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var j;j=b.replace(/^[ \t]*>[ \t]?/gm,"~0");j=j.replace(/~0/g,"");j=j.replace(/^[ \t]+$/gm,"");j=n(j);j=j.replace(/(^|\n)/g,"$1  ");j=j.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var d;d=b.replace(/^  /mg,"~0");return d=d.replace(/~0/g,"")});return c("<blockquote>\n"+
j+"\n</blockquote>")})},v=function(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");return a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},F=function(a){a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>');return a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return G(A(b))})},G=function(a){var b=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){a=a.charCodeAt(0);return"&#x"+("0123456789ABCDEF".charAt(a>>4)+"0123456789ABCDEF".charAt(a&
15))+";"},function(a){return a}];a=("mailto:"+a).replace(/./g,function(a){if(a=="@")a=b[Math.floor(Math.random()*2)](a);else if(a!=":"){var c=Math.random();a=c>0.9?b[2](a):c>0.45?b[1](a):b[0](a)}return a});return a=('<a href="'+a+'">'+a+"</a>").replace(/">.+:/g,'">')},A=function(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})},y=function(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")},z=function(a){a=a.replace(/\t(?=\t)/g,"    ");
a=a.replace(/\t/g,"~A~B");a=a.replace(/~B(.+?)~A/g,function(a,b){for(var c=b,e=4-c.length%4,f=0;f<e;f++)c+=" ";return c});a=a.replace(/~A/g,"    ");return a=a.replace(/~B/g,"")},u=function(a,b,c){b="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(b="\\\\"+b);return a=a.replace(RegExp(b,"g"),w)},w=function(a,b){return"~E"+b.charCodeAt(0)+"E"}};namespace.lookup("com.pageforest.wiki").defineOnce(function(g){function k(){var e=b.editor.value;if(e!=f){l.setDirty();f=e;try{b.output.innerHTML=n.makeHtml(e),r.updateScriptSections(b.output)}catch(h){}}}function p(){(h=!h)?($(b.page).addClass("edit"),q||(q=!0,$(b.editor).bind("keyup",k).autoResize({limit:1E4}))):$(b.page).removeClass("edit");$(b.edit).val(h?"hide":"edit")}function m(b){document.title=b.title;$("#title").text(b.title)}var t=namespace.lookup("org.startpad.dom"),r=namespace.lookup("org.startpad.nsdoc"),
l,n=new Showdown.converter,b,f="",h=!1,q=!1;g.extend({onReady:function(){b=t.bindIDs();l=new namespace.com.pageforest.client.Client(g);l.saveInterval=0;l.addAppBar();$(b.edit).click(p);setInterval(k,5E3)},getDoc:function(){return{blob:{version:1,markdown:b.editor.value},readers:["public"]}},setDoc:function(e){b.editor.value=e.blob.markdown;k();m(e)},onSaveSuccess:function(){m(l.meta)}})});namespace.lookup("org.startpad.nsdoc").defineOnce(function(g){function k(b,f){var h=new m.StBuf,q=b.split(".").length;h.append(t.repeat("#",q)+" *"+b+"*(");q=r.exec(f.toString());if(q===null)return"error reading function: "+b+"\n";q=q[1].split(n);var e="";if(q.length>1||q[0]!="")h.append("*"+q.join("*, *")+"*"),e=", ";f.toString().indexOf("arguments")!=-1&&h.append(e+"...");h.append(")\n");b=b[0].toLowerCase()+b.slice(1);for(var g in f.prototype)typeof f.prototype[g]=="function"&&h.append(k(b+"."+
g,f.prototype[g]));return h.toString()}function p(b){if(typeof b!="function")return"notAFunction";b=l.exec(b.toString());if(b==null)return"anonymous";return b[1]}var m=namespace.lookup("org.startpad.base"),t=namespace.lookup("org.startpad.format"),r=/^function\s+\S*\(([^\)]*)\)/,l=/function\s+(\S+)\s*\(/,n=/\s*,\s/;g.extend({namespaceDoc:function(b){var f=new m.StBuf,h;for(h in b)if(b.hasOwnProperty(h)){var g=b[h];typeof g!="function"||h=="_closure"||f.append(k(h,g))}return f.toString()},updateScriptSections:function(b){b=
$("script",b);for(var f,h=0;h<b.length;h++){var g=b[h];f=[];var e=m.strip(g.innerHTML);e=e.split("\n");for(var k=[],l=0,n=0,c=0;c<e.length;c++)if(c!=e.length-1&&!/^\S.*;\s*$/.test(e[c]))k[c]="";else{n=e.slice(n,c+1).join("\n");n=m.strip(n);try{var o=eval(n);if(o==void 0)k[c]="";else{typeof o=="string"&&(o='"'+o+'"',o.replace(/"/g,'""'));typeof o=="function"&&(o="function "+p(o));if(typeof o=="object")if(o===null)o="null";else{var r=p(o.constructor)+": ";try{o=r+JSON.stringify(o)}catch(C){o+=r+"{...}"}}k[c]=
"// "+o.toString()}}catch(v){k[c]="// Exception: "+v.message}l=Math.max(e[c].length,l);n=c+1}for(c=0;c<e.length;c++)k[c]!=""&&(e[c]+=t.repeat(" ",l-e[c].length+2)+k[c]);e=e.join("\n");$(g).before("<pre><code>"+t.escapeHTML(e)+"</code></pre>");f.length>0&&$(g).after('<pre class="printed"><code>'+t.escapeHTML(f.join("\n"))+"</code></pre>")}}})});