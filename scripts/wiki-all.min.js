(function(b){function c(){}function d(b){if(!b)return 0;b=b.split(".");return 1E4*parseInt(b[0])+100*parseInt(b[1])+parseInt(b[2])}function j(b){for(var b=b.replace(/-/g,"_"),b=b.split("."),f=h,i=0;i<b.length;i++)f[b[i]]===void 0&&(f[b[i]]=new c),f=f[b[i]];return f}var h=b.namespace;if(h){if(d("3.0.1")<=d(h.VERSION))return;c=h.constructor}else b.namespace=h=new c;h.VERSION="3.0.1";b=c.prototype;b.module=function(b,f){var c=j(b);f&&f(c,j);return c};b.extend=function(b){for(var f in b)b.hasOwnProperty(f)&&
(this[f]=b[f])}})(this);
namespace.module("org.startpad.types",function(b){function c(b,c){return d(b)==c}function d(b){if(b===void 0)return"undefined";if(b===null)return"null";var c=Object.prototype.toString.call(b).match(/\[object (.*)\]/)[1].toLowerCase();j.indexOf(c)==-1&&(c=typeof b);return c}b.extend({VERSION:"0.1.0",isArguments:function(b){return c(b,"arguments")},isArray:function(b){return c(b,"array")},copyArray:function(b){return Array.prototype.slice.call(b)},isType:c,typeOf:d,extend:function(b){var c,g,l,e;b===
void 0&&(b={});for(c=1;c<arguments.length;c++){l=arguments[c];for(e in l)l.hasOwnProperty(e)&&(b[e]=l[e]);if(h)for(g=0;g<k.length;g++)e=k[g],l.hasOwnProperty(e)&&(b[e]=l[e])}return b},project:function(b,c){for(var g={},l=0;l<c.length;l++){var e=c[l];b&&b.hasOwnProperty(e)&&(g[e]=b[e])}return g},getFunctionName:function(b){if(typeof b=="function"){b=b.toString().match(/function\s*(\S+)\s*\(/);if(!b)return"";return b[1]}}});var j=["number","string","boolean","array","function","date","regexp","arguments",
"undefined","null"],h=!{toString:!0}.propertyIsEnumerable("toString"),k=["toString","toLocaleString","valueOf","constructor","isPrototypeOf"]});
namespace.module("org.startpad.funcs",function(b,c){function d(b){if(!b)return 0;b=b.split(".");return 1E4*parseInt(b[0])+100*parseInt(b[1])+parseInt(b[2])}function j(b,c,g,l){if(!(b._patches&&d(b._patches[c])>=d(g)))b._patches=b._patches||{},b._patches[c]=g,h(b,l)}function h(b,c){l.extend(b.prototype,c)}function k(b,c){function g(b,c){for(var e=l.copyArray(b),c=l.copyArray(c),d=0;d<e.length;d++)e[d]===void 0&&(e[d]=c.shift());return e.concat(c)}var d;d=arguments.length==3&&l.isArguments(arguments[2])?
Array.prototype.slice.call(arguments[2],self1):Array.prototype.slice.call(arguments,2);return function(){return b.apply(c||this,g(d,arguments))}}function f(b,c){function g(){return c.call(this,b,arguments,g)}c.call(b,void 0,arguments,g);return g}function i(b){function c(){}c.prototype=b;return new c}function g(b,c,g){b.prototype=i(c.prototype);b.prototype.constructor=b;b.prototype._super=c;b.prototype._proto=c.prototype;h(b,g)}var l=c("org.startpad.types");b.extend({VERSION:"0.2.1",methods:h,bind:k,
decorate:f,shadow:i,subclass:g,numericVersion:d,monkeyPatch:j,patch:function(){j(Function,"org.startpad.funcs",b.VERSION,{methods:function(b){h(this,b)},curry:function(){var b=[this,void 0].concat(l.copyArray(arguments));return k.apply(void 0,b)},curryThis:function(){var b=l.copyArray(arguments);b.unshift(this);return k.apply(void 0,b)},decorate:function(b){return f(this,b)},subclass:function(b,c){return g(this,b,c)}});return b}})});
namespace.module("org.startpad.string",function(b,c){function d(b,c,d){d=d||h;if(b==void 0)return"undefined";b=b.toString();return b=b.replace(d,function(b,d){for(var e=c,h=d.split("."),j=0;j<h.length;j++){var d=h[j],i=parseInt(d),e=isNaN(i)?e[d]:e[i];if(e==void 0)return""}return e})}var j=c("org.startpad.funcs");b.extend({VERSION:"0.1.2",patch:function(){j.monkeyPatch(String,"org.startpad.string",b.VERSION,{format:function(){return arguments.length==1&&typeof arguments[0]=="object"?d(this,arguments[0]):
d(this,arguments)}});return b},format:d});var h=/\{\s*([^} ]+)\s*\}/g});(function(b){b.fn.autoResize=function(c){var d=b.extend({onResize:function(){},animate:!0,animateDuration:150,animateCallback:function(){},extraSpace:20,limit:1E3},c);this.filter("textarea").each(function(){var c=b(this).css({resize:"none","overflow-y":"hidden"}),h=c.height(),k=function(){var g={};b.each(["height","width","lineHeight","textDecoration","letterSpacing"],function(b,d){g[d]=c.css(d)});return c.clone().removeAttr("id").removeAttr("name").css({position:"absolute",top:0,left:-9999}).css(g).attr("tabIndex",
"-1").insertBefore(c)}(),f=null,i=function(){k.height(0).val(b(this).val()).scrollTop(1E4);var g=Math.max(k.scrollTop(),h)+d.extraSpace,l=b(this).add(k);if(g>=d.limit)b(this).css("overflow-y",""),g=d.limit;f!==g&&(f=g,d.onResize.call(this),d.animate&&c.css("display")==="block"?l.stop().animate({height:g},d.animateDuration,d.animateCallback):l.height(g))};c.unbind(".dynSiz").bind("keyup.dynSiz",i).bind("keydown.dynSiz",i).bind("change.dynSiz",i).trigger("change.dynSiz")});return this}})(jQuery);var Showdown={converter:function(){var b,c,d,j=0;this.makeHtml=function(a){b=[];c=[];d=[];a=a.replace(/~/g,"~T");a=a.replace(/\$/g,"~D");a=a.replace(/\r\n/g,"\n");a=a.replace(/\r/g,"\n");a=B("\n\n"+a+"\n\n");a=a.replace(/^[ \t]+$/mg,"");a=k(a);a=h(a);a=i(a);a=C(a);a=a.replace(/~D/g,"$$");return a=a.replace(/~T/g,"~")};var h=function(a){return a=a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|\Z)/gm,function(a,o,g,d,e){o=o.toLowerCase();b[o]=
x(g);if(d)return d+e;else e&&(c[o]=e.replace(/"/g,"&quot;"));return""})},k=function(a){a=a.replace(/\n/g,"\n\n");a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,f);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,f);a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,f);a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,
f);a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,f);return a=a.replace(/\n\n/g,"\n")},f=function(a,b){var c;c=b.replace(/\n\n/g,"\n");c=c.replace(/^\n/,"");c=c.replace(/\n+$/g,"");return c="\n\n~K"+(d.push(c)-1)+"K\n\n"},i=function(a){for(var a=w(a),b=m("<hr />"),a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,b),a=s(a),a=r(a),a=D(a),a=k(a),a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,
""),c=a.split(/\n{2,}/g),a=[],b=c.length,p=0;p<b;p++){var e=c[p];e.search(/~K(\d+)K/g)>=0?a.push(e):e.search(/\S/)>=0&&(e=g(e),e=e.replace(/^([ \t]*)/g,"<p>"),e+="</p>",a.push(e))}b=a.length;for(p=0;p<b;p++)for(;a[p].search(/~K(\d+)K/)>=0;)c=d[RegExp.$1],c=c.replace(/\$/g,"$$$$"),a[p]=a[p].replace(/~K\d+K/,c);return a=a.join("\n\n")},g=function(a){a=n(a);a=l(a);a=a.replace(/\\(\\)/g,y);a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,y);a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,A);a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,
A);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,e);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,e);a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,e);a=E(a);a=x(a);a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>");a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>");return a=a.replace(/  +\n/g," <br />\n")},l=function(a){return a=a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,
function(a){a=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return a=u(a,"\\`*_")})},e=function(a,t,o,g,d,e,l,h){h==void 0&&(h="");a=g.toLowerCase();if(d=="")if(a==""&&(a=o.toLowerCase().replace(/ ?\n/g," ")),b[a]!=void 0)d=b[a],c[a]!=void 0&&(h=c[a]);else if(t.search(/\(\s*\)$/m)>-1)d="";else return t;d=u(d,"*_");t='<a href="'+d+'"';h!=""&&(h=h.replace(/"/g,"&quot;"),h=u(h,"*_"),t+=' title="'+h+'"');t+=">"+o+"</a>";return t},A=function(a,d,o,g,e,h,l,f){a=o;g=g.toLowerCase();f||(f="");if(e=="")if(g==""&&
(g=a.toLowerCase().replace(/ ?\n/g," ")),b[g]!=void 0)e=b[g],c[g]!=void 0&&(f=c[g]);else return d;a=a.replace(/"/g,"&quot;");e=u(e,"*_");d='<img src="'+e+'" alt="'+a+'"';f=f.replace(/"/g,"&quot;");f=u(f,"*_");d+=' title="'+f+'"';d+=" />";return d},w=function(a){a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,b){return m("<h1>"+g(b)+"</h1>")});a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,b){return m("<h2>"+g(b)+"</h2>")});return a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,
b,c){a=b.length;return m("<h"+a+">"+g(c)+"</h"+a+">")})},q,s=function(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;j?a=a.replace(b,function(a,b,c){a=b;c=c.search(/[*+-]/g)>-1?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=q(a);a=a.replace(/\s+$/,"");return"<"+c+">"+a+"</"+c+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,c,d){a=c;d=d.search(/[*+-]/g)>
-1?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=q(a);return b+"<"+d+">\n"+a+"</"+d+">\n"}));return a=a.replace(/~0/,"")};q=function(a){j++;a=a.replace(/\n{2,}$/,"\n");a+="~0";a=a.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(a,b,c,d,e){a=e;b||a.search(/\n{2,}/)>-1?a=i(z(a)):(a=s(z(a)),a=a.replace(/\n$/,""),a=g(a));return"<li>"+a+"</li>\n"});a=a.replace(/~0/g,"");j--;return a};var r=function(a){a+="~0";a=a.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,
function(a,b,c){a=v(z(b));a=B(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");return m("<pre><code>"+a+"\n</code></pre>")+c});return a=a.replace(/~0/,"")},m=function(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(d.push(a)-1)+"K\n\n"},n=function(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d){a=d.replace(/^([ \t]*)/g,"");a=a.replace(/[ \t]*$/g,"");a=v(a);return b+"<code>"+a+"</code>"})},v=function(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,
"&gt;");return a=u(a,"*_{}[]\\",!1)},D=function(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c;c=b.replace(/^[ \t]*>[ \t]?/gm,"~0");c=c.replace(/~0/g,"");c=c.replace(/^[ \t]+$/gm,"");c=i(c);c=c.replace(/(^|\n)/g,"$1  ");c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c;c=b.replace(/^  /mg,"~0");return c=c.replace(/~0/g,"")});return m("<blockquote>\n"+c+"\n</blockquote>")})},x=function(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");return a=
a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},E=function(a){a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>');return a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return F(C(b))})},F=function(a){var b=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){a=a.charCodeAt(0);return"&#x"+("0123456789ABCDEF".charAt(a>>4)+"0123456789ABCDEF".charAt(a&15))+";"},function(a){return a}],a=("mailto:"+a).replace(/./g,function(a){if(a=="@")a=b[Math.floor(Math.random()*
2)](a);else if(a!=":")var c=Math.random(),a=c>0.9?b[2](a):c>0.45?b[1](a):b[0](a);return a});return a=('<a href="'+a+'">'+a+"</a>").replace(/">.+:/g,'">')},C=function(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})},z=function(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")},B=function(a){a=a.replace(/\t(?=\t)/g,"    ");a=a.replace(/\t/g,"~A~B");a=a.replace(/~B(.+?)~A/g,function(a,b){for(var c=b,d=4-c.length%4,g=0;g<d;g++)c+=" ";
return c});a=a.replace(/~A/g,"    ");return a=a.replace(/~B/g,"")},u=function(a,b,c){b="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(b="\\\\"+b);return a=a.replace(RegExp(b,"g"),y)},y=function(a,b){return"~E"+b.charCodeAt(0)+"E"}}};exports.version="0.1.2";function context(b){if(typeof b!=="string")return"";b=b.slice(0,25).replace(/\n/g,"\\n").replace(/"/g,'\\"');return'near "'+b+'"'}
var tokens=[["comment",/^#[^\n]*/],["indent",/^\n( *)/],["space",/^ +/],["true",/^(enabled|true|yes|on)/],["false",/^(disabled|false|no|off)/],["string",/^"(.*?)"/],["string",/^'(.*?)'/],["float",/^(\d+\.\d+)/],["int",/^(\d+)/],["doc",/^---/],[",",/^,/],["{",/^\{(?![^\n\}]*\}[^\n]*[^\s\n\}])/],["}",/^\}/],["[",/^\[(?![^\n\]]*\][^\n]*[^\s\n\]])/],["]",/^\]/],["-",/^\-/],[":",/^[:]/],["string",/^(?![^:\n\s]*:[^\/]{2})(([^:,\]\}\n\s]|(?!\n)\s(?!\s*?\n)|:\/\/|,(?=[^\n]*\s*[^\]\}\s\n]\s*\n)|[\]\}](?=[^\n]*\s*[^\]\}\s\n]\s*\n))*)(?=[,:\]\}\s\n]|$)/],
["id",/^([\w ]+)/]];
exports.tokenize=function(b){for(var c,d,j,h=lastIndents=0,k=[];b.length;){for(var f=0,i=tokens.length;f<i;++f)if(d=tokens[f][1].exec(b)){c=[tokens[f][0],d];b=b.replace(tokens[f][1],"");switch(c[0]){case "comment":j=!0;break;case "indent":if(lastIndents=h,h=c[1][1].length/2,h===lastIndents)j=!0;else if(h>lastIndents+1)throw new SyntaxError("invalid indentation, got "+h+" instead of "+(lastIndents+1));else if(h<lastIndents){d=c[1].input;c=["dedent"];for(c.input=d;--lastIndents>h;)k.push(c)}}break}if(!j)if(c)k.push(c),
c=null;else throw new SyntaxError(context(b));j=!1}return k};function Parser(b){this.tokens=b}Parser.prototype.peek=function(){return this.tokens[0]};Parser.prototype.advance=function(){return this.tokens.shift()};Parser.prototype.advanceValue=function(){return this.advance()[1][1]};Parser.prototype.accept=function(b){if(this.peekType(b))return this.advance()};Parser.prototype.expect=function(b,c){if(!this.accept(b))throw Error(c+", "+context(this.peek()[1].input));};
Parser.prototype.peekType=function(b){return this.tokens[0]&&this.tokens[0][0]===b};Parser.prototype.ignoreSpace=function(){for(;this.peekType("space");)this.advance()};Parser.prototype.ignoreWhitespace=function(){for(;this.peekType("space")||this.peekType("indent")||this.peekType("dedent");)this.advance()};
Parser.prototype.parse=function(){switch(this.peek()[0]){case "doc":return this.parseDoc();case "-":return this.parseList();case "{":return this.parseInlineHash();case "[":return this.parseInlineList();case "id":return this.parseHash();case "string":return this.advanceValue();case "float":return parseFloat(this.advanceValue());case "int":return parseInt(this.advanceValue());case "true":return!0;case "false":return!1}};
Parser.prototype.parseDoc=function(){this.accept("doc");this.expect("indent","expected indent after document");var b=this.parse();this.expect("dedent","document not properly dedented");return b};Parser.prototype.parseHash=function(){for(var b,c={};this.peekType("id")&&(b=this.advanceValue());)this.expect(":","expected semi-colon after id"),this.ignoreSpace(),this.accept("indent")?(c[b]=this.parse(),this.expect("dedent","hash not properly dedented")):c[b]=this.parse(),this.ignoreSpace();return c};
Parser.prototype.parseInlineHash=function(){var b={},c,d=0;for(this.accept("{");!this.accept("}");){this.ignoreSpace();d&&this.expect(",","expected comma");this.ignoreWhitespace();if(this.peekType("id")&&(c=this.advanceValue()))this.expect(":","expected semi-colon after id"),this.ignoreSpace(),b[c]=this.parse(),this.ignoreWhitespace();++d}return b};
Parser.prototype.parseList=function(){for(var b=[];this.accept("-");)this.ignoreSpace(),this.accept("indent")?(b.push(this.parse()),this.expect("dedent","list item not properly dedented")):b.push(this.parse()),this.ignoreSpace();return b};Parser.prototype.parseInlineList=function(){var b=[],c=0;for(this.accept("[");!this.accept("]");)this.ignoreSpace(),c&&this.expect(",","expected comma"),this.ignoreSpace(),b.push(this.parse()),this.ignoreSpace(),++c;return b};exports.parse=function(b){return(new Parser(exports.tokenize(b))).parse()};var clientLib=require("com.pageforest.client"),dom=require("org.startpad.dom"),nsdoc=require("org.startpad.nsdoc"),yaml=require("ca.vision-media.yaml"),markdown=new Showdown.converter;exports.extend({onReady:onReady,getDoc:getDoc,setDoc:setDoc,onSaveSuccess:onSaveSuccess});var client,doc,blob,lastText="",syncTime=5,editVisible=!1,editorInitialized=!1;
function onEditChange(){var b=doc.editor.value;if(b!=lastText){client.setDirty();lastText=b;try{blob=yaml.parse(b),doc.output.innerHTML=markdown.makeHtml(blob.markdown||b),nsdoc.updateScriptSections(doc.output)}catch(c){}}}function toggleEditor(){(editVisible=!editVisible)?($(doc.page).addClass("edit"),editorInitialized||(editorInitialized=!0,$(doc.editor).bind("keyup",onEditChange).autoResize({limit:1E4}))):$(doc.page).removeClass("edit");$(doc.edit).val(editVisible?"hide":"edit")}
function onReady(){handleAppCache();doc=dom.bindIDs();client=new clientLib.Client(exports);client.saveInterval=0;client.addAppBar();$(doc.edit).click(toggleEditor);setInterval(onEditChange,syncTime*1E3)}function updateMeta(b){document.title=b.title;$("#title").text(b.title)}function onSaveSuccess(){updateMeta(client.meta)}function setDoc(b){doc.editor.value=b.blob.markdown;onEditChange();updateMeta(b)}function getDoc(){return{blob:{version:1,markdown:doc.editor.value},readers:["public"]}}
function handleAppCache(){typeof applicationCache!="undefined"&&(applicationCache.status==applicationCache.UPDATEREADY?(applicationCache.swapCache(),location.reload()):applicationCache.addEventListener("updateready",handleAppCache,!1))};namespace.lookup("org.startpad.nsdoc").defineOnce(function(b){function c(b,d){var e=new j.StBuf,f=b.split(".").length;e.append(h.repeat("#",f)+" *"+b+"*(");f=k.exec(d.toString());if(f===null)return"error reading function: "+b+"\n";var f=f[1].split(i),w="";if(f.length>1||f[0]!="")e.append("*"+f.join("*, *")+"*"),w=", ";d.toString().indexOf("arguments")!=-1&&e.append(w+"...");e.append(")\n");var b=b[0].toLowerCase()+b.slice(1),q;for(q in d.prototype)typeof d.prototype[q]=="function"&&e.append(c(b+"."+
q,d.prototype[q]));return e.toString()}function d(b){if(typeof b!="function")return"notAFunction";b=f.exec(b.toString());if(b==null)return"anonymous";return b[1]}var j=namespace.lookup("org.startpad.base"),h=namespace.lookup("org.startpad.format"),k=/^function\s+\S*\(([^\)]*)\)/,f=/function\s+(\S+)\s*\(/,i=/\s*,\s/;b.extend({namespaceDoc:function(b){var d=new j.StBuf,e;for(e in b)if(b.hasOwnProperty(e)){var f=b[e];typeof f!="function"||e=="_closure"||d.append(c(e,f))}return d.toString()},updateScriptSections:function(b){for(var b=
$("script",b),c,e=0;e<b.length;e++){var f=b[e];c=[];for(var i=j.strip(f.innerHTML),i=i.split("\n"),k=[],s=0,r=0,m=0;m<i.length;m++)if(m!=i.length-1&&!/^\S.*;\s*$/.test(i[m]))k[m]="";else{r=i.slice(r,m+1).join("\n");r=j.strip(r);try{var n=eval(r);if(n==void 0)k[m]="";else{typeof n=="string"&&(n='"'+n+'"',n.replace(/"/g,'""'));typeof n=="function"&&(n="function "+d(n));if(typeof n=="object")if(n===null)n="null";else{var v=d(n.constructor)+": ";try{n=v+JSON.stringify(n)}catch(D){n+=v+"{...}"}}k[m]="// "+
n.toString()}}catch(x){k[m]="// Exception: "+x.message}s=Math.max(i[m].length,s);r=m+1}for(m=0;m<i.length;m++)k[m]!=""&&(i[m]+=h.repeat(" ",s-i[m].length+2)+k[m]);i=i.join("\n");$(f).before("<pre><code>"+h.escapeHTML(i)+"</code></pre>");c.length>0&&$(f).after('<pre class="printed"><code>'+h.escapeHTML(c.join("\n"))+"</code></pre>")}}})});